
<div *ngIf="showOrderList">
<!--查询 start-->
<div class="mb-15">
  <div class="bg-white p-15">
    <div class="inline-block">
      <div class="pending-group ml-20 mb fl">
        <span class="pending-title text-center">收货人手机号：</span>
        <div class="pending-main fr">
          <nz-input [(ngModel)]="orderquery.phone"  [nzPlaceHolder]="'请填写会员手机号'" [nzSize]="'large'"></nz-input>
        </div>
      </div>
      <div class="pending-group ml-20 mb fl">
        <span class="pending-title text-center">订单号：</span>
        <div class="pending-main fr">
          <nz-input [(ngModel)]="orderquery.agentOrdno"  [nzPlaceHolder]="'请填写订单号'" [nzSize]="'large'"></nz-input>
        </div>
      </div>
      <button nz-button [nzSize]="'large'" class="ml-15 btn-danger fl" (click)="queryPending()">
        <i class="anticon anticon-search"></i>
      </button>
    </div>
  </div>
</div>
<!--查询 end-->

<!--table表头 start -->
<ul class="table-head">
  <li class="w40 fl text-center">商品</li>
  <li class="w8 fl text-center">单价</li>
  <li class="w8 fl text-center">数量</li>
  <li class="w10 fl text-center">收货人手机号</li>
  <li class="w10 fl text-center">店铺名</li>
  <li class="w8 fl text-center">订单金额（元）</li>
  <li class="w8 fl text-center">交易状态</li>
  <li class="w8 fl text-center">交易操作</li>
</ul>
<!--table表头 end -->

<!--table列表 start-->
<nz-table #nzTable
          [nzAjaxData]="orderList.voList"
          [nzLoading]="_loading"
          [nzTotal]="orderList.totalRow"
          [(nzPageIndex)]="orderList.curPage"
          (nzPageIndexChange)="queryPending()"
          [(nzPageSize)]="orderList.pageSize"
          class="table-even-bg">
  <tbody>
  <tr class="b" *ngFor="let orders of nzTable.data;let i = index">
    <td class="w100">
      <div class="order-space"></div>
      <div class="tbody-tr-head">
        <span class="fl pl-20">订单编号：{{orders.ordno}}</span>
        <span class="fl pl-20">下单时间：{{orders.createTime}}</span>
      </div>
      <table class="w100 b">
        <tr *ngFor="let name of orders.ordItemList;let j = index">
          <td class="relative w40 p">
            <div class="mr inline-block fl">
              <img [src]="name.goodsImage" class="goods-img" (mousemove)="showImg($event)"
                   (mouseleave)="hideImg($event)"
                   onerror="javascript:this.src='../../../assets/img/dummy.png'" alt="">
              <img [src]="name.goodsImage" class="hover-img"
                   onerror="javascript:this.src='../../../assets/img/dummy.png'" alt="">
            </div>
            <div class="fl pl pt">
              <p>
                <a class="font14" href="javascript:;">{{name.goodsName}}</a>
              </p>
              <p class="pt-20" *ngFor="let attr of name.goodsSavSet | strJson">
                <span class="inline">{{attr.attrName}}：</span>
                <span class="inline">{{attr.value}}</span>
              </p>
            </div>
          </td>
          <td class="w8 text-center bl">&yen; {{name.price| number:'1.2-2'}}</td>
          <td class="w8 text-center bl">{{name.num}}</td>
          <td class="w10 text-center bl" *ngIf="j==0" [attr.rowspan]="orders.ordItemList.length">{{orders.phone}}</td>
          <td class="w10 text-center bl" *ngIf="j==0" [attr.rowspan]="orders.ordItemList.length">
           <!-- <span class="cursor p-hover" (mouseenter)="showUserInfo(t)" (mouseleave)="hideBuyerInfo(t)">-->
              {{name.storeName}}
           <!-- </span>-->
            <!--<div class="szh-buyer-info" #t (mouseenter)="showUserInfo(t)" (mouseleave)="hideBuyerInfo(t)">
              <div class="info-con">
                <p>收货人信息</p>
                <dl class="pt-5"><dt>姓名：</dt><dd class="pl">{{orders.linkman}}</dd></dl>
                <dl><dt>电话：</dt><dd>{{orders.mobile}}</dd></dl>
                <dl><dt>地址：</dt><dd>{{orders.addr}}</dd></dl>
              </div>
            </div>-->
          </td>
          <td class="w8 text-center bl" *ngIf="j==0" [attr.rowspan]="orders.ordItemList.length">
            <span class="main-color">&yen; {{orders.ordTotal | number:'1.2-2'}}</span><br>
            <span class="font12 gray-color">运费{{orders.freight  | number:'1.2-2'}}</span><br>
            <span class="font12 gray-color">重消币{{orders.coinPay | number:'1.2-2'}}</span>
          </td>
          <td class="w8 text-center bl" *ngIf="j==0" [attr.rowspan]="orders.ordItemList.length">
            <p class="gray-color">{{orders.state | stateName : enum.orderState}}</p>
            <p class="cursor p-hover" [routerLink]="orderDetail" [queryParams]="{ordno:orders.ordno}">查看详情</p>
          </td>
          <td class="w8 text-center bl" *ngIf="j==0" [attr.rowspan]="orders.ordItemList.length">
            <button nz-button [nzSize]="'large'" class="btn-danger" title="设置发货" (click)="showOrderPend(orders.ordno)">
              <i class="anticon anticon-car"></i>
            </button>
          </td>
        </tr>
      </table>
    </td>
  </tr>
  </tbody>
</nz-table>
<!--table列表 end-->


<!--设置发货弹窗 -- start -->
<nz-modal [nzVisible]="isOrderPend" [nzTitle]="'设置发货'" class="thc" [nzContent]="modalContent"
          (nzOnCancel)="hideMask($event)"
          (nzOnOk)="hideleOk($event)" [nzConfirmLoading]="isConfirm">
  <ng-template #modalContent>
    <!--申请提现 -- start -->
    <input class="form-control" required [(ngModel)]="expressCode" name="expressCode"/>
    <form nz-form [formGroup]="validateForm">
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSm]="6" [nzXs]="24">
          <label>订单号</label>
        </div>
        <div class="pt-5">
          <span class="font14">{{getOrdno}}</span>
        </div>
      </div>
      <div nz-form-item nz-row>
      <div nz-form-label nz-col [nzSm]="6" [nzXs]="24">
        <label nz-form-item-required>快递公司快递号</label>
      </div>
      <div nz-form-control nz-col [nzSm]="14" [nzXs]="24" nzHasFeedback
           [nzValidateStatus]="getFormControl('email')">
        <nz-input [nzSize]="'large'" [nzPlaceHolder]="'请快递公司快递号'" formControlName="email" [nzId]="'email'" [(ngModel)]="expressNos"></nz-input>
        <div nz-form-explain *ngIf="getFormControl('email').dirty&&getFormControl('email').hasError('email')">
          请快递公司快递号!
        </div>
      </div>
    </div>
      <div nz-form-item nz-row>
        <div nz-form-label nz-col [nzSpan]="6">
          <label nz-form-item-required>选择快递公司</label>
        </div>
        <div nz-form-control nz-col [nzSpan]="14">
          <nz-select class="w100" formControlName="audits" name="audits" [nzSize]="'large'" [(ngModel)]="expressCode">
            <nz-option [nzLabel]="''" [nzValue]="''"></nz-option>
            <nz-option
              *ngFor="let item of auditsDataList"
              [nzLabel]="item.expressName"
              [nzValue]="item.expressCode">
            </nz-option>
          </nz-select>
        </div>
      </div>
    </form>
    <!--申请提现 -- end -->
  </ng-template>
</nz-modal>
<!--设置发货弹窗 -- end -->
</div>

<!--路由嵌套 begin-->
<router-outlet (activate)="isactivate($event)" (deactivate)='isDeactivate($event)'></router-outlet>
<!--路由嵌套 end-->


